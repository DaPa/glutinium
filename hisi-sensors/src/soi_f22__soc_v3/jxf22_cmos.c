#if !defined(__JXF22_CMOS_H_)
#define __JXF22_CMOS_H_

#include <stdio.h>
#include <string.h>
#include <assert.h>
#include "hi_comm_sns.h"
#include "hi_comm_video.h"
#include "hi_sns_ctrl.h"
#include "mpi_isp.h"
#include "mpi_ae.h"
#include "mpi_awb.h"
#include "mpi_af.h"

#ifdef __cplusplus
#if __cplusplus
extern "C"{
#endif
#endif /* End of #ifdef __cplusplus */

#define JXF22_ID 22


/****************************************************************************
 * local variables                                                          *
 ****************************************************************************/

static HI_U16 g_au16InitWBGain[ISP_MAX_DEV_NUM][3] = {{0}};
static HI_U16 g_au16SampleRgain[ISP_MAX_DEV_NUM] = {0};
static HI_U16 g_au16SampleBgain[ISP_MAX_DEV_NUM] = {0};

extern const unsigned int sensor_i2c_addr;
extern unsigned int sensor_addr_byte;
extern unsigned int sensor_data_byte;

#define FULL_LINES_MAX  (0xFFFF)

#define EXPOSURE_ADDR_H        (0x02)
#define EXPOSURE_ADDR_L        (0x01)
#define AGC_ADDR                (0x00)
#define VMAX_ADDR_L             (0x22)
#define VMAX_ADDR_H             (0x23)

#define INCREASE_LINES (0) /* make real fps less than stand fps because NVR require*/
#define VMAX_1080P30_LINEAR  (1134+INCREASE_LINES)

#define SENSOR_1080P_30FPS_MODE (1)

HI_U8 gu8SensorImageMode = SENSOR_1080P_30FPS_MODE;
WDR_MODE_E genSensorMode = WDR_MODE_NONE;

static HI_U32 gu32FullLinesStd = VMAX_1080P30_LINEAR;
static HI_U32 gu32FullLines = VMAX_1080P30_LINEAR;
static HI_U32 gu32PreFullLines = VMAX_1080P30_LINEAR;
static HI_BOOL bInit = HI_FALSE;
HI_BOOL bSensorInit = HI_FALSE; 
ISP_SNS_REGS_INFO_S g_stSnsRegsInfo = {0};
ISP_SNS_REGS_INFO_S g_stPreSnsRegsInfo = {0};

static HI_S32 cmos_get_ae_default(AE_SENSOR_DEFAULT_S *pstAeSnsDft)
{
    if (HI_NULL == pstAeSnsDft)
    {
        printf("null pointer when get ae default value!\n");
        return -1;
    }

    memset(&pstAeSnsDft->stAERouteAttr, 0, sizeof(ISP_AE_ROUTE_S));
      
    pstAeSnsDft->u32LinesPer500ms = gu32FullLinesStd*30/2;
    pstAeSnsDft->u32FullLinesStd = gu32FullLinesStd;
    pstAeSnsDft->u32FlickerFreq = 0;
    pstAeSnsDft->u32FullLinesMax = FULL_LINES_MAX;

    pstAeSnsDft->stIntTimeAccu.enAccuType = AE_ACCURACY_LINEAR;
    pstAeSnsDft->stIntTimeAccu.f32Accuracy = 1;
    pstAeSnsDft->stIntTimeAccu.f32Offset = 0;

    pstAeSnsDft->stAgainAccu.enAccuType = AE_ACCURACY_TABLE;
    pstAeSnsDft->stAgainAccu.f32Accuracy = 1;

    pstAeSnsDft->stDgainAccu.enAccuType = AE_ACCURACY_LINEAR;
    pstAeSnsDft->stDgainAccu.f32Accuracy = 0.0625;

	pstAeSnsDft->u32MaxDgain = 16;  
	pstAeSnsDft->u32MinDgain = 16;
    
    pstAeSnsDft->u32ISPDgainShift = 8;
    pstAeSnsDft->u32MinISPDgainTarget = 1 << pstAeSnsDft->u32ISPDgainShift;
    pstAeSnsDft->u32MaxISPDgainTarget = 4 << pstAeSnsDft->u32ISPDgainShift;
    
    pstAeSnsDft->enMaxIrisFNO = ISP_IRIS_F_NO_1_0;
    pstAeSnsDft->enMinIrisFNO = ISP_IRIS_F_NO_32_0;

    pstAeSnsDft->bAERouteExValid = HI_FALSE;
    pstAeSnsDft->stAERouteAttr.u32TotalNum = 0;
    pstAeSnsDft->stAERouteAttrEx.u32TotalNum = 0;

    pstAeSnsDft->u32InitExposure = 921600;
    pstAeSnsDft->stIntTimeAccu.f32Offset = 0;

    switch(genSensorMode)
    {
        default:
        case WDR_MODE_NONE:   /*linear mode*/
            pstAeSnsDft->au8HistThresh[0] = 0xd;
            pstAeSnsDft->au8HistThresh[1] = 0x28;
            pstAeSnsDft->au8HistThresh[2] = 0x60;
            pstAeSnsDft->au8HistThresh[3] = 0x80;
            pstAeSnsDft->u8AeCompensation = 0x32;
			gu32FullLinesStd = VMAX_1080P30_LINEAR ;
		    pstAeSnsDft->u32MaxIntTime = gu32FullLinesStd - 4;
		    pstAeSnsDft->u32MinIntTime = 2;
		    pstAeSnsDft->u32MaxIntTimeTarget = 65535;
		    pstAeSnsDft->u32MinIntTimeTarget = 2;
		    pstAeSnsDft->u32MaxAgain = 15872;  // 15.5 
		    pstAeSnsDft->u32MinAgain = 1024;
		    pstAeSnsDft->u32MaxAgainTarget = pstAeSnsDft->u32MaxAgain;
		    pstAeSnsDft->u32MinAgainTarget = pstAeSnsDft->u32MinAgain;
		    pstAeSnsDft->u32MaxDgainTarget = pstAeSnsDft->u32MaxDgain;
		    pstAeSnsDft->u32MinDgainTarget = pstAeSnsDft->u32MinDgain;
			pstAeSnsDft->u32LinesPer500ms = gu32FullLinesStd*30/2;
	    break;
    }
    return 0;
}

/* the function of sensor set fps */
static HI_VOID cmos_fps_set(HI_FLOAT f32Fps, AE_SENSOR_DEFAULT_S *pstAeSnsDft)
{
    if (SENSOR_1080P_30FPS_MODE == gu8SensorImageMode)
    {
        if ((f32Fps <= 30) && (f32Fps > 0.50))
        {
            /* In 1080P30fps mode, the VMAX(FullLines) is VMAX_1080P30_LINEAR, 
                	 and there are (VMAX_1080P30_LINEAR*30) lines in 1 second,
                	 so in f32Fps mode, VMAX(FullLines) is (VMAX_1080P30_LINEAR*30)/f32Fps */
            gu32FullLinesStd = (VMAX_1080P30_LINEAR * 30) / f32Fps;
        }
        else
        {
            printf("Not support Fps: %f\n", f32Fps);
            return;
        }
    }
    else
    {
        printf("Not support! gu8SensorImageMode:%d, f32Fps:%f\n", gu8SensorImageMode, f32Fps);
        return;
    }

    gu32FullLinesStd = (gu32FullLinesStd > FULL_LINES_MAX) ? FULL_LINES_MAX : gu32FullLinesStd;
    if(WDR_MODE_NONE == genSensorMode)
    {
	    g_stSnsRegsInfo.astI2cData[3].u32Data = (gu32FullLinesStd & 0xFF);     // 0X22
	    g_stSnsRegsInfo.astI2cData[4].u32Data = ((gu32FullLinesStd & 0xFF00) >> 8);   // 0X23 
    }
    pstAeSnsDft->f32Fps = f32Fps;
    pstAeSnsDft->u32LinesPer500ms = gu32FullLinesStd * f32Fps / 2;
    pstAeSnsDft->u32MaxIntTime = gu32FullLinesStd - 4;
    pstAeSnsDft->u32FullLinesStd = gu32FullLinesStd;
    gu32FullLines = gu32FullLinesStd;
    pstAeSnsDft->u32FullLines = gu32FullLines;
    return;
}

static HI_VOID cmos_slow_framerate_set(HI_U32 u32FullLines,
    AE_SENSOR_DEFAULT_S *pstAeSnsDft)
{
    u32FullLines = (u32FullLines > FULL_LINES_MAX) ? FULL_LINES_MAX : u32FullLines;
	gu32FullLines = u32FullLines;
	pstAeSnsDft->u32FullLines = gu32FullLines;
    if(WDR_MODE_NONE == genSensorMode)
    {
        g_stSnsRegsInfo.astI2cData[3].u32Data = (u32FullLines & 0xFF);
        g_stSnsRegsInfo.astI2cData[4].u32Data = ((u32FullLines & 0xFF00) >> 8);
    }
    else
    {
        pstAeSnsDft->u32FullLines = gu32FullLinesStd;
        return;
    }
    pstAeSnsDft->u32MaxIntTime = gu32FullLines - 4;
    return;
}

/* while isp notify ae to update sensor regs, ae call these funcs. */
static HI_VOID cmos_inttime_update(HI_U32 u32IntTime)
{
    g_stSnsRegsInfo.astI2cData[0].u32Data = (u32IntTime & 0xFF);
    g_stSnsRegsInfo.astI2cData[1].u32Data = ((u32IntTime & 0xFF00) >> 8);

    return;
}

static HI_VOID cmos_again_calc_table(HI_U32 *pu32AgainLin, HI_U32 *pu32AgainDb)
{
	int again;
	int tmp=0;
	again = *pu32AgainLin >> 6;  //10bit -> 4bit ,1 = 16;
	while(again>31)
	{
		again = again/2;
		tmp++;
	}
	if(again > 15)
	{
		again = again-16;
	}
    
	*pu32AgainDb = (tmp<<4)|again;
	
	return;
}

static HI_VOID cmos_gains_update(HI_U32 u32Again, HI_U32 u32Dgain)
{
	g_stSnsRegsInfo.astI2cData[2].u32Data = u32Again & 0xFF;

    return;
}

HI_S32 cmos_init_ae_exp_function(AE_SENSOR_EXP_FUNC_S *pstExpFuncs)
{
    memset(pstExpFuncs, 0, sizeof(AE_SENSOR_EXP_FUNC_S));

    pstExpFuncs->pfn_cmos_get_ae_default    = cmos_get_ae_default;
    pstExpFuncs->pfn_cmos_fps_set           = cmos_fps_set;
    pstExpFuncs->pfn_cmos_slow_framerate_set= cmos_slow_framerate_set;
    pstExpFuncs->pfn_cmos_inttime_update    = cmos_inttime_update;
    pstExpFuncs->pfn_cmos_gains_update      = cmos_gains_update;
    pstExpFuncs->pfn_cmos_again_calc_table  = cmos_again_calc_table;
    return 0;
}

static AWB_CCM_S g_stAwbCcm =
{
    4950,
    {
        0x0270,0x814F,0x8021,
        0x8047,0x01D2,0x808B,
        0x801A,0x80D8,0x01F2
    },
    
    3650,
    {
        0x1C3,0x80A7,0x801C,
        0x807F,0x1AD,0x802E,
        0x8048,0x80E7,0x22F
    },
    
    2700,
    {
        0x022B,0x80D1,0x805A,
        0x8053,0x01B2,0x805F,
        0x8065,0x81FE,0x0363
    }
};

static AWB_AGC_TABLE_S g_stAwbAgcTable =
{
    /* bvalid */
    1,
	
    /*1,  2,  4,  8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768*/
    /* saturation */   
    {118, 115, 110, 100, 90, 85, 75, 65, 65, 65, 70, 64, 64, 56, 56, 56}
};

/* Rgain and Bgain of the golden sample */
#define GOLDEN_RGAIN 0   
#define GOLDEN_BGAIN 0  

static HI_S32 cmos_get_awb_default(AWB_SENSOR_DEFAULT_S *pstAwbSnsDft)
{
	HI_U8 i;
    ISP_DEV IspDev = 0;

    if (HI_NULL == pstAwbSnsDft)
    {
        printf("null pointer when get awb default value!\n");
        return -1;
    }
    memset(pstAwbSnsDft, 0, sizeof(AWB_SENSOR_DEFAULT_S));

    pstAwbSnsDft->u16WbRefTemp = 4950;
	pstAwbSnsDft->au16GainOffset[0] = 0x19C;
	pstAwbSnsDft->au16GainOffset[1] = 0x100;
	pstAwbSnsDft->au16GainOffset[2] = 0x100;
	pstAwbSnsDft->au16GainOffset[3] = 0x1CB;
	pstAwbSnsDft->as32WbPara[0] = 49;
	pstAwbSnsDft->as32WbPara[1] = 207;
	pstAwbSnsDft->as32WbPara[2] = 0;
	pstAwbSnsDft->as32WbPara[3] = 160025;
	pstAwbSnsDft->as32WbPara[4] = 128;
	pstAwbSnsDft->as32WbPara[5] = -107016;
    
	for (i=0; i<4; i++)
    {
        pstAwbSnsDft->au32BlcOffset[i] = 0x0;
    }
 
    pstAwbSnsDft->u16GoldenRgain = GOLDEN_RGAIN;
    pstAwbSnsDft->u16GoldenBgain = GOLDEN_BGAIN;
    
    memcpy(&pstAwbSnsDft->stCcm, &g_stAwbCcm, sizeof(AWB_CCM_S));
    memcpy(&pstAwbSnsDft->stAgcTbl, &g_stAwbAgcTable, sizeof(AWB_AGC_TABLE_S));

    pstAwbSnsDft->u16SampleRgain = g_au16SampleRgain[IspDev];
    pstAwbSnsDft->u16SampleBgain = g_au16SampleBgain[IspDev];
    pstAwbSnsDft->u16InitRgain = g_au16InitWBGain[IspDev][0];
    pstAwbSnsDft->u16InitGgain = g_au16InitWBGain[IspDev][1];
    pstAwbSnsDft->u16InitBgain = g_au16InitWBGain[IspDev][2];

    pstAwbSnsDft->u8AWBRunInterval = 4;

    return 0;
}

HI_S32 cmos_init_awb_exp_function(AWB_SENSOR_EXP_FUNC_S *pstExpFuncs)
{
    memset(pstExpFuncs, 0, sizeof(AWB_SENSOR_EXP_FUNC_S));
    
    pstExpFuncs->pfn_cmos_get_awb_default = cmos_get_awb_default;
    
    return 0;
}

/* ISP default parameter and function */
static ISP_CMOS_DEMOSAIC_S g_stIspDemosaic =
{
    /*bEnable*/
	1,
    /*au16EdgeSmoothThr*/
	{8,16,16,16,16,16,128,1022,1022,1022,1022,1022,1022,1022,1022,1022},
	/*au16EdgeSmoothSlope*/
	{16,16,16,16,16,32,32,0,0,0,0,0,0,0,0,0},
	/*au16AntiAliasThr*/
	{53,53,53,86,112,112,1022,1022,1022,1022,1022,1022,1022,1022,1022,1022},
	/*au16AntiAliasSlope*/
	{256,256,256,256,256,256,0,0,0,0,0,0,0,0,0,0},
    /*NrCoarseStr*/
    {128, 128, 128, 112, 96, 48, 16, 0, 0, 0, 0, 0, 0, 0, 0, 0},
	/*NoiseSuppressStr*/
	{4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32, 36},
	/*DetailEnhanceStr*/
	{4, 4, 4, 4, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    /*SharpenLumaStr*/
    {256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256},
    /*ColorNoiseCtrlThr*/
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
};	
            
static ISP_CMOS_GE_S g_stIspGe =
{
	/*For GE*/
	1,    /*bEnable*/
	9,    /*u8Slope*/
	9,    /*u8SensiSlope*/
	300, /*u16SensiThr*/
	{300,300,300,300,310,310,310,  310,  320,320,320,320,330,330,330,330}, /*au16Threshold[ISP_AUTO_ISO_STRENGTH_NUM]*/
	{ 128, 128, 128, 128, 129, 129, 129,   129,   130, 130, 130, 130, 131, 131, 131, 131}, /*au16Strength[ISP_AUTO_ISO_STRENGTH_NUM]*/
	{1024,1024,1024,2048,2048,2048,2048,  2048,  2048,2048,2048,2048,2048,2048,2048,2048}    /*au16NpOffset[ISP_AUTO_ISO_STRENGTH_NUM]*/
};

static ISP_CMOS_FCR_S g_stIspFcr =
{
    /*For FCR*/
    /*bEnable*/
	1,
	/*au8Strength[ISP_AUTO_ISO_STRENGTH_NUM]*/
	{4, 8, 8, 8, 7, 7, 7, 6, 6, 6, 5, 4, 3, 2, 1, 0},
    /*au8Threhold[ISP_AUTO_ISO_STRENGTH_NUM]*/
	{24, 24, 24, 24, 20, 20, 20, 16, 14, 12, 10, 8, 6, 4, 2, 0},
    /*au16Offset[ISP_AUTO_ISO_STRENGTH_NUM]*/
	{150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150}
};

static ISP_CMOS_YUV_SHARPEN_S g_stIspYuvSharpen = 
{
    /* bvalid */
    1,
    /* 100,  200,    400,     800,    1600,    3200,    6400,    12800,    25600,   51200,  102400,  204800,   409600,   819200,   1638400,  3276800 */
    /* au16SharpenUd */
    {23, 20, 18, 16, 14, 7, 4, 2, 2, 6, 3, 3, 3, 2, 1, 1},
    /* au8SharpenD */
    {80, 70, 66, 60, 55, 42, 32, 20, 15, 15, 35, 30, 30, 30, 30, 30},
    /*au8TextureThd*/
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    /* au8SharpenEdge */
    {75, 75, 75, 75, 75, 75, 65, 60, 50, 45, 60, 60, 60, 60, 60, 60},
    /* au8EdgeThd */
    {80, 80, 80, 90, 100, 100, 100, 100, 100, 110, 120, 130, 150, 170, 180, 190},
    /* au8OverShoot */
    {170, 140, 100, 75, 65, 50, 26, 16, 10, 10, 20, 10, 10, 10, 10, 10},
    /* au8UnderShoot */
    {190, 150, 100, 75, 65, 65, 50, 40, 30, 20, 20, 10, 10, 10, 10, 10},
    /*au8shootSupSt*/
    {40, 30, 30, 30, 20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    /* au8DetailCtrl */
    {128, 128, 128, 128, 118, 100, 80, 70, 65, 55, 55, 55, 55, 55, 55, 55},
    /* au8RGain */
    {16,   16,   16,   16,   24,   31,   31,   31,   31,   31,   31,   31,   31,   31,   31,   31},
	/* au8BGain */
    {20,   20,   20,   20,   26,   31,   31,   31,   31,   31,   31,   31,   31,   31,   31,   31},
	/* au8SkinGain */
    {255, 255,  255,  255,  255,  255,  255,  255,  255,  255,  255,  255,  255,  255,  255,  255},
	
	/*  au8EdgeFiltStr*/
	{0,	  0,	   0,	   0,	   0,		0,     0,		0,		0,		0,		0,			0,			0,		0,		0,		0}, 
	
	/*  au8JagCtrl*/
	{252 ,   252 ,    252,     252,    252,	       252,      252,      252,	   252,	     252,	   252,	  252,	  252,	  252,	  252,    252}, 
	
	/*  au8NoiseLumaCtrl*/
	{0,	  0,	   0,	   0,	   0,		0,     0,		0,		0,		0,		0,			0,			0,		0,		0,		0}, 
};

static ISP_CMOS_DRC_S g_stIspDRC = 
{
    /*bEnable*/
    0,    
    /*u8SpatialVar*/
    3,    
	/*u8RangeVar*/
	15,
	/*u8Asymmetry8*/
    2,
	/*u8SecondPole; */
    180,
	/*u8Stretch*/
    54,
	/*u8Compress*/ 
    180,
	/*u8PDStrength*/
    35,
	/*u8LocalMixingBrigtht*/
    20,
    /*u8LocalMixingDark*/
    20,
    /*ColorCorrectionLut[33];*/
    {1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024,1024},
    /*bOpType 0:auto  1:manual*/
    0,
    /*u8ManualStrength*/
    128,
    /*u8AutoStrength*/
    128,
};                                                                                                                                 

static ISP_CMOS_GAMMA_S g_stIspGamma =
{
    /* bvalid */
    1,
    {
        0,93,189,285,380,473,563,649,712,772,829,885,940,995,1051,1108,1167,1201,1236,1272,
		1308,1345,1381,1418,1455,1492,1528,1564,1599,1634,1667,1699,1731,1761,1790,1818,
		1846,1874,1900,1926,1952,1977,2001,2025,2049,2072,2095,2117,2140,2161,2182,2202,
		2222,2241,2260,2279,2297,2314,2332,2349,2366,2383,2400,2417,2434,2450,2467,2483,
		2500,2516,2532,2547,2563,2578,2593,2608,2623,2638,2652,2666,2681,2694,2708,2721,
		2734,2747,2759,2772,2784,2796,2809,2821,2833,2845,2857,2869,2882,2894,2906,2919,
		2932,2944,2957,2970,2982,2995,3007,3019,3031,3043,3055,3066,3078,3088,3099,3110,
		3120,3131,3141,3151,3161,3170,3180,3189,3199,3208,3218,3227,3237,3246,3255,3264,
		3273,3282,3291,3300,3308,3317,3326,3334,3343,3351,3360,3368,3377,3385,3393,3402,
		3410,3418,3427,3435,3443,3451,3460,3468,3476,3483,3491,3499,3507,3514,3521,3529,
		3536,3543,3550,3557,3564,3571,3578,3585,3592,3598,3605,3612,3619,3625,3632,3638,
		3645,3651,3658,3664,3671,3677,3683,3690,3696,3702,3709,3715,3722,3728,3734,3741,
		3747,3753,3760,3766,3773,3779,3785,3792,3798,3804,3811,3817,3824,3830,3836,3843,
		3850,3856,3863,3870,3876,3883,3889,3896,3902,3908,3915,3921,3927,3932,3938,3943,
		3949,3954,3959,3965,3970,3975,3980,3985,3990,3995,4000,4005,4011,4016,4021,4026,
		4032,4037,4042,4047,4053,4058,4063,4068,4074,4079,4084,4089,4095,
	}
};

static ISP_CMOS_CA_S g_stIspCA = 
{
    /*enable*/
	1,
	/*YRatioLut*/
    {
        36 ,81  ,111 ,136 ,158 ,182 ,207 ,228 ,259 ,290 ,317 ,345 ,369 ,396 ,420 ,444 ,
    	468 ,492 ,515 ,534 ,556 ,574 ,597 ,614 ,632 ,648 ,666 ,681 ,697 ,709 ,723 ,734 ,
    	748 ,758 ,771 ,780 ,788 ,800 ,808 ,815 ,822 ,829 ,837 ,841 ,848 ,854 ,858 ,864 ,
    	868 ,871 ,878 ,881 ,885 ,890 ,893 ,897 ,900 ,903 ,906 ,909 ,912 ,915 ,918 ,921 ,
    	924 ,926 ,929 ,931 ,934 ,936 ,938 ,941 ,943 ,945 ,947 ,949 ,951 ,952 ,954 ,956 ,
    	958 ,961 ,962 ,964 ,966 ,968 ,969 ,970 ,971 ,973 ,974 ,976 ,977 ,979 ,980 ,981 ,
    	983 ,984 ,985 ,986 ,988 ,989 ,990 ,991 ,992 ,993 ,995 ,996 ,997 ,998 ,999 ,1000,
    	1001,1004,1005,1006,1007,1009,1010,1011,1012,1014,1016,1017,1019,1020,1022,1024
    },
	/*ISORatio*/
    {1300,1300,1250,1200,1150,1100,1050,1000,1000,1000,900,900,800,800,800,800}
};

static ISP_CMOS_DPC_S g_stCmosDpc = 
{

	{0, 0, 200, 200 ,200, 200, 220, 220, 220, 220, 152, 152, 152, 152, 152, 152},/*au16Strength[16]*/
	{0, 0, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50},/*au16BlendRatio[16]*/
};

static ISP_LSC_CABLI_UNI_TABLE_S g_stCmosLscUniTable = 
{
   /*Mesh Grid Info: Width*/
   {60, 60, 60, 60, 60, 60, 60, 60},
   /*Mesh Grid Info: Height*/
   {34, 34, 34, 34, 34, 34, 33, 33},
};

static ISP_LSC_CABLI_TABLE_S g_stCmosLscTable[HI_ISP_LSC_LIGHT_NUM] = 
{
    {
        /* AWB RGain */
        445,
        /* AWB BGain */
        481,
        /* Channel R */
        {
            1841, 1582, 1396, 1279, 1195, 1152, 1126, 1111, 1108, 1105, 1113, 1141, 1165, 1214, 1306, 1447, 1635, 
            1760, 1518, 1350, 1233, 1171, 1137, 1112, 1096, 1093, 1092, 1103, 1119, 1146, 1189, 1266, 1398, 1561, 
            1671, 1449, 1296, 1199, 1147, 1117, 1093, 1084, 1080, 1078, 1089, 1102, 1128, 1168, 1233, 1347, 1495, 
            1595, 1404, 1263, 1187, 1128, 1097, 1083, 1071, 1067, 1069, 1081, 1094, 1110, 1148, 1201, 1302, 1445, 
            1540, 1365, 1232, 1163, 1114, 1094, 1074, 1062, 1059, 1058, 1067, 1085, 1106, 1135, 1184, 1271, 1400, 
            1508, 1333, 1214, 1146, 1108, 1083, 1071, 1054, 1045, 1053, 1058, 1075, 1094, 1124, 1167, 1250, 1369, 
            1478, 1327, 1200, 1140, 1093, 1079, 1056, 1042, 1038, 1038, 1052, 1066, 1084, 1117, 1158, 1231, 1337, 
            1452, 1299, 1190, 1131, 1095, 1080, 1051, 1037, 1030, 1036, 1042, 1061, 1083, 1105, 1152, 1221, 1334, 
            1457, 1292, 1185, 1128, 1092, 1070, 1053, 1032, 1025, 1029, 1041, 1059, 1084, 1103, 1148, 1209, 1319, 
            1446, 1290, 1186, 1132, 1085, 1071, 1048, 1032, 1024, 1024, 1038, 1057, 1076, 1106, 1147, 1216, 1318, 
            1457, 1290, 1189, 1131, 1091, 1072, 1053, 1037, 1031, 1030, 1044, 1060, 1079, 1102, 1154, 1219, 1334, 
            1459, 1304, 1193, 1134, 1094, 1072, 1053, 1041, 1034, 1035, 1042, 1064, 1084, 1108, 1155, 1225, 1333, 
            1480, 1322, 1203, 1144, 1100, 1077, 1060, 1050, 1045, 1041, 1052, 1070, 1088, 1112, 1160, 1238, 1354, 
            1521, 1348, 1222, 1155, 1110, 1082, 1067, 1053, 1052, 1048, 1060, 1072, 1092, 1127, 1173, 1257, 1384, 
            1548, 1383, 1245, 1170, 1122, 1091, 1074, 1066, 1062, 1061, 1068, 1081, 1101, 1134, 1186, 1282, 1414, 
            1623, 1432, 1286, 1184, 1137, 1106, 1089, 1076, 1070, 1073, 1079, 1089, 1116, 1153, 1204, 1315, 1458, 
            1677, 1465, 1312, 1200, 1151, 1118, 1097, 1092, 1080, 1081, 1084, 1099, 1134, 1161, 1225, 1343, 1502, 
        },

        /* Channel Gr */
        {
            1807, 1547, 1359, 1254, 1177, 1140, 1120, 1106, 1102, 1104, 1113, 1130, 1157, 1203, 1289, 1430, 1604, 
            1717, 1479, 1316, 1216, 1156, 1121, 1102, 1090, 1089, 1091, 1097, 1114, 1138, 1175, 1249, 1373, 1542, 
            1636, 1421, 1269, 1178, 1132, 1104, 1088, 1082, 1075, 1080, 1082, 1097, 1117, 1151, 1211, 1322, 1476, 
            1562, 1373, 1235, 1169, 1116, 1091, 1078, 1070, 1066, 1071, 1076, 1086, 1104, 1137, 1186, 1282, 1427, 
            1508, 1334, 1209, 1145, 1104, 1085, 1071, 1063, 1056, 1056, 1065, 1077, 1093, 1119, 1166, 1250, 1380, 
            1480, 1303, 1190, 1131, 1095, 1076, 1065, 1053, 1046, 1048, 1056, 1072, 1088, 1112, 1151, 1228, 1352, 
            1446, 1299, 1177, 1123, 1086, 1074, 1057, 1043, 1038, 1038, 1050, 1065, 1081, 1104, 1142, 1209, 1324, 
            1425, 1271, 1171, 1118, 1084, 1075, 1050, 1038, 1030, 1033, 1045, 1060, 1080, 1098, 1137, 1203, 1308, 
            1414, 1260, 1164, 1115, 1082, 1067, 1049, 1033, 1024, 1028, 1041, 1055, 1078, 1095, 1138, 1194, 1303, 
            1411, 1258, 1164, 1118, 1079, 1066, 1045, 1033, 1025, 1026, 1039, 1054, 1072, 1094, 1134, 1193, 1300, 
            1419, 1262, 1165, 1117, 1081, 1066, 1047, 1038, 1029, 1028, 1039, 1057, 1075, 1095, 1136, 1198, 1306, 
            1431, 1278, 1169, 1119, 1085, 1066, 1051, 1043, 1033, 1034, 1041, 1060, 1074, 1100, 1137, 1200, 1308, 
            1455, 1293, 1180, 1127, 1091, 1070, 1055, 1047, 1041, 1040, 1049, 1065, 1079, 1105, 1143, 1211, 1330, 
            1482, 1320, 1194, 1134, 1096, 1074, 1063, 1053, 1049, 1049, 1055, 1066, 1084, 1110, 1151, 1232, 1354, 
            1518, 1352, 1218, 1147, 1108, 1083, 1070, 1062, 1054, 1057, 1063, 1072, 1091, 1120, 1163, 1248, 1389, 
            1583, 1393, 1252, 1164, 1120, 1094, 1079, 1072, 1064, 1066, 1069, 1082, 1103, 1135, 1183, 1282, 1434, 
            1639, 1430, 1277, 1180, 1134, 1104, 1086, 1081, 1075, 1073, 1075, 1092, 1115, 1149, 1204, 1313, 1482, 
        },

        /* Channel Gb */
        {
            1808, 1541, 1371, 1256, 1179, 1145, 1123, 1113, 1106, 1109, 1119, 1137, 1167, 1207, 1297, 1438, 1612, 
            1705, 1474, 1313, 1214, 1153, 1123, 1100, 1091, 1092, 1091, 1099, 1114, 1137, 1176, 1246, 1374, 1536, 
            1629, 1415, 1267, 1180, 1133, 1101, 1087, 1079, 1075, 1078, 1083, 1098, 1121, 1152, 1211, 1324, 1473, 
            1549, 1371, 1232, 1165, 1118, 1089, 1077, 1067, 1067, 1068, 1076, 1088, 1105, 1138, 1183, 1282, 1424, 
            1505, 1331, 1206, 1142, 1103, 1085, 1071, 1059, 1056, 1056, 1065, 1077, 1095, 1123, 1167, 1250, 1378, 
            1463, 1297, 1184, 1128, 1094, 1074, 1065, 1053, 1043, 1049, 1056, 1070, 1087, 1110, 1155, 1226, 1347, 
            1439, 1290, 1170, 1122, 1086, 1072, 1059, 1042, 1037, 1039, 1048, 1063, 1078, 1108, 1145, 1212, 1323, 
            1418, 1268, 1162, 1116, 1080, 1072, 1050, 1040, 1031, 1031, 1045, 1058, 1077, 1100, 1137, 1202, 1314, 
            1408, 1260, 1160, 1112, 1077, 1064, 1049, 1033, 1025, 1029, 1043, 1055, 1079, 1096, 1136, 1197, 1309, 
            1404, 1256, 1159, 1114, 1079, 1061, 1045, 1032, 1024, 1024, 1037, 1051, 1073, 1096, 1132, 1191, 1301, 
            1409, 1260, 1164, 1114, 1078, 1060, 1045, 1039, 1030, 1027, 1038, 1055, 1073, 1094, 1133, 1198, 1309, 
            1421, 1273, 1165, 1117, 1083, 1064, 1052, 1040, 1033, 1033, 1040, 1058, 1074, 1097, 1136, 1202, 1310, 
            1443, 1288, 1175, 1122, 1089, 1072, 1057, 1047, 1042, 1042, 1048, 1064, 1077, 1104, 1142, 1211, 1333, 
            1469, 1316, 1187, 1133, 1093, 1073, 1063, 1049, 1048, 1047, 1054, 1070, 1084, 1111, 1153, 1229, 1354, 
            1512, 1345, 1214, 1145, 1105, 1077, 1067, 1059, 1057, 1057, 1063, 1074, 1091, 1121, 1164, 1254, 1386, 
            1584, 1390, 1250, 1160, 1122, 1092, 1079, 1068, 1065, 1066, 1070, 1081, 1104, 1136, 1182, 1286, 1428, 
            1643, 1427, 1278, 1182, 1137, 1102, 1083, 1078, 1072, 1073, 1073, 1091, 1116, 1148, 1208, 1319, 1480, 
        },

        /* Channel B */
        {
            1800, 1528, 1364, 1239, 1162, 1125, 1105, 1093, 1093, 1093, 1101, 1124, 1149, 1190, 1276, 1416, 1559, 
            1698, 1472, 1311, 1205, 1144, 1116, 1096, 1084, 1086, 1088, 1096, 1107, 1135, 1167, 1241, 1370, 1519, 
            1613, 1409, 1260, 1173, 1123, 1095, 1079, 1077, 1072, 1073, 1081, 1094, 1112, 1147, 1202, 1315, 1439, 
            1540, 1363, 1227, 1156, 1109, 1085, 1069, 1064, 1062, 1063, 1070, 1086, 1101, 1132, 1176, 1272, 1397, 
            1490, 1325, 1197, 1134, 1095, 1080, 1067, 1054, 1051, 1052, 1065, 1075, 1088, 1118, 1159, 1238, 1359, 
            1464, 1292, 1179, 1120, 1088, 1072, 1060, 1048, 1044, 1045, 1056, 1067, 1085, 1111, 1148, 1218, 1323, 
            1434, 1286, 1164, 1114, 1081, 1068, 1053, 1043, 1033, 1040, 1048, 1060, 1076, 1094, 1137, 1207, 1304, 
            1413, 1261, 1159, 1109, 1078, 1071, 1048, 1035, 1029, 1034, 1046, 1059, 1078, 1091, 1132, 1198, 1288, 
            1407, 1257, 1149, 1108, 1077, 1061, 1047, 1029, 1024, 1028, 1038, 1051, 1075, 1087, 1131, 1188, 1281, 
            1401, 1250, 1148, 1103, 1077, 1061, 1044, 1026, 1024, 1025, 1040, 1052, 1069, 1091, 1129, 1186, 1276, 
            1401, 1251, 1149, 1107, 1077, 1060, 1044, 1036, 1026, 1025, 1037, 1054, 1071, 1087, 1130, 1192, 1286, 
            1420, 1260, 1155, 1108, 1081, 1062, 1049, 1039, 1036, 1035, 1039, 1057, 1069, 1094, 1132, 1197, 1294, 
            1436, 1277, 1170, 1119, 1086, 1066, 1054, 1043, 1043, 1038, 1042, 1059, 1076, 1104, 1141, 1206, 1308, 
            1470, 1300, 1184, 1127, 1096, 1070, 1058, 1048, 1049, 1044, 1052, 1064, 1078, 1109, 1148, 1224, 1329, 
            1504, 1335, 1204, 1140, 1102, 1075, 1063, 1056, 1053, 1053, 1061, 1074, 1088, 1118, 1159, 1247, 1363, 
            1559, 1374, 1247, 1157, 1117, 1087, 1079, 1066, 1064, 1063, 1068, 1076, 1100, 1132, 1180, 1282, 1406, 
            1627, 1416, 1269, 1179, 1129, 1100, 1082, 1075, 1067, 1066, 1071, 1084, 1113, 1141, 1205, 1306, 1452, 
        },

    },

    {
        /* AWB RGain */
        445,
        /* AWB BGain */
        481,
        /* Channel R */
        {
            1841, 1582, 1396, 1279, 1195, 1152, 1126, 1111, 1108, 1105, 1113, 1141, 1165, 1214, 1306, 1447, 1635, 
            1760, 1518, 1350, 1233, 1171, 1137, 1112, 1096, 1093, 1092, 1103, 1119, 1146, 1189, 1266, 1398, 1561, 
            1671, 1449, 1296, 1199, 1147, 1117, 1093, 1084, 1080, 1078, 1089, 1102, 1128, 1168, 1233, 1347, 1495, 
            1595, 1404, 1263, 1187, 1128, 1097, 1083, 1071, 1067, 1069, 1081, 1094, 1110, 1148, 1201, 1302, 1445, 
            1540, 1365, 1232, 1163, 1114, 1094, 1074, 1062, 1059, 1058, 1067, 1085, 1106, 1135, 1184, 1271, 1400, 
            1508, 1333, 1214, 1146, 1108, 1083, 1071, 1054, 1045, 1053, 1058, 1075, 1094, 1124, 1167, 1250, 1369, 
            1478, 1327, 1200, 1140, 1093, 1079, 1056, 1042, 1038, 1038, 1052, 1066, 1084, 1117, 1158, 1231, 1337, 
            1452, 1299, 1190, 1131, 1095, 1080, 1051, 1037, 1030, 1036, 1042, 1061, 1083, 1105, 1152, 1221, 1334, 
            1457, 1292, 1185, 1128, 1092, 1070, 1053, 1032, 1025, 1029, 1041, 1059, 1084, 1103, 1148, 1209, 1319, 
            1446, 1290, 1186, 1132, 1085, 1071, 1048, 1032, 1024, 1024, 1038, 1057, 1076, 1106, 1147, 1216, 1318, 
            1457, 1290, 1189, 1131, 1091, 1072, 1053, 1037, 1031, 1030, 1044, 1060, 1079, 1102, 1154, 1219, 1334, 
            1459, 1304, 1193, 1134, 1094, 1072, 1053, 1041, 1034, 1035, 1042, 1064, 1084, 1108, 1155, 1225, 1333, 
            1480, 1322, 1203, 1144, 1100, 1077, 1060, 1050, 1045, 1041, 1052, 1070, 1088, 1112, 1160, 1238, 1354, 
            1521, 1348, 1222, 1155, 1110, 1082, 1067, 1053, 1052, 1048, 1060, 1072, 1092, 1127, 1173, 1257, 1384, 
            1548, 1383, 1245, 1170, 1122, 1091, 1074, 1066, 1062, 1061, 1068, 1081, 1101, 1134, 1186, 1282, 1414, 
            1623, 1432, 1286, 1184, 1137, 1106, 1089, 1076, 1070, 1073, 1079, 1089, 1116, 1153, 1204, 1315, 1458, 
            1677, 1465, 1312, 1200, 1151, 1118, 1097, 1092, 1080, 1081, 1084, 1099, 1134, 1161, 1225, 1343, 1502, 
        },

        /* Channel Gr */
        {
            1807, 1547, 1359, 1254, 1177, 1140, 1120, 1106, 1102, 1104, 1113, 1130, 1157, 1203, 1289, 1430, 1604, 
            1717, 1479, 1316, 1216, 1156, 1121, 1102, 1090, 1089, 1091, 1097, 1114, 1138, 1175, 1249, 1373, 1542, 
            1636, 1421, 1269, 1178, 1132, 1104, 1088, 1082, 1075, 1080, 1082, 1097, 1117, 1151, 1211, 1322, 1476, 
            1562, 1373, 1235, 1169, 1116, 1091, 1078, 1070, 1066, 1071, 1076, 1086, 1104, 1137, 1186, 1282, 1427, 
            1508, 1334, 1209, 1145, 1104, 1085, 1071, 1063, 1056, 1056, 1065, 1077, 1093, 1119, 1166, 1250, 1380, 
            1480, 1303, 1190, 1131, 1095, 1076, 1065, 1053, 1046, 1048, 1056, 1072, 1088, 1112, 1151, 1228, 1352, 
            1446, 1299, 1177, 1123, 1086, 1074, 1057, 1043, 1038, 1038, 1050, 1065, 1081, 1104, 1142, 1209, 1324, 
            1425, 1271, 1171, 1118, 1084, 1075, 1050, 1038, 1030, 1033, 1045, 1060, 1080, 1098, 1137, 1203, 1308, 
            1414, 1260, 1164, 1115, 1082, 1067, 1049, 1033, 1024, 1028, 1041, 1055, 1078, 1095, 1138, 1194, 1303, 
            1411, 1258, 1164, 1118, 1079, 1066, 1045, 1033, 1025, 1026, 1039, 1054, 1072, 1094, 1134, 1193, 1300, 
            1419, 1262, 1165, 1117, 1081, 1066, 1047, 1038, 1029, 1028, 1039, 1057, 1075, 1095, 1136, 1198, 1306, 
            1431, 1278, 1169, 1119, 1085, 1066, 1051, 1043, 1033, 1034, 1041, 1060, 1074, 1100, 1137, 1200, 1308, 
            1455, 1293, 1180, 1127, 1091, 1070, 1055, 1047, 1041, 1040, 1049, 1065, 1079, 1105, 1143, 1211, 1330, 
            1482, 1320, 1194, 1134, 1096, 1074, 1063, 1053, 1049, 1049, 1055, 1066, 1084, 1110, 1151, 1232, 1354, 
            1518, 1352, 1218, 1147, 1108, 1083, 1070, 1062, 1054, 1057, 1063, 1072, 1091, 1120, 1163, 1248, 1389, 
            1583, 1393, 1252, 1164, 1120, 1094, 1079, 1072, 1064, 1066, 1069, 1082, 1103, 1135, 1183, 1282, 1434, 
            1639, 1430, 1277, 1180, 1134, 1104, 1086, 1081, 1075, 1073, 1075, 1092, 1115, 1149, 1204, 1313, 1482, 
        },

        /* Channel Gb */
        {
            1808, 1541, 1371, 1256, 1179, 1145, 1123, 1113, 1106, 1109, 1119, 1137, 1167, 1207, 1297, 1438, 1612, 
            1705, 1474, 1313, 1214, 1153, 1123, 1100, 1091, 1092, 1091, 1099, 1114, 1137, 1176, 1246, 1374, 1536, 
            1629, 1415, 1267, 1180, 1133, 1101, 1087, 1079, 1075, 1078, 1083, 1098, 1121, 1152, 1211, 1324, 1473, 
            1549, 1371, 1232, 1165, 1118, 1089, 1077, 1067, 1067, 1068, 1076, 1088, 1105, 1138, 1183, 1282, 1424, 
            1505, 1331, 1206, 1142, 1103, 1085, 1071, 1059, 1056, 1056, 1065, 1077, 1095, 1123, 1167, 1250, 1378, 
            1463, 1297, 1184, 1128, 1094, 1074, 1065, 1053, 1043, 1049, 1056, 1070, 1087, 1110, 1155, 1226, 1347, 
            1439, 1290, 1170, 1122, 1086, 1072, 1059, 1042, 1037, 1039, 1048, 1063, 1078, 1108, 1145, 1212, 1323, 
            1418, 1268, 1162, 1116, 1080, 1072, 1050, 1040, 1031, 1031, 1045, 1058, 1077, 1100, 1137, 1202, 1314, 
            1408, 1260, 1160, 1112, 1077, 1064, 1049, 1033, 1025, 1029, 1043, 1055, 1079, 1096, 1136, 1197, 1309, 
            1404, 1256, 1159, 1114, 1079, 1061, 1045, 1032, 1024, 1024, 1037, 1051, 1073, 1096, 1132, 1191, 1301, 
            1409, 1260, 1164, 1114, 1078, 1060, 1045, 1039, 1030, 1027, 1038, 1055, 1073, 1094, 1133, 1198, 1309, 
            1421, 1273, 1165, 1117, 1083, 1064, 1052, 1040, 1033, 1033, 1040, 1058, 1074, 1097, 1136, 1202, 1310, 
            1443, 1288, 1175, 1122, 1089, 1072, 1057, 1047, 1042, 1042, 1048, 1064, 1077, 1104, 1142, 1211, 1333, 
            1469, 1316, 1187, 1133, 1093, 1073, 1063, 1049, 1048, 1047, 1054, 1070, 1084, 1111, 1153, 1229, 1354, 
            1512, 1345, 1214, 1145, 1105, 1077, 1067, 1059, 1057, 1057, 1063, 1074, 1091, 1121, 1164, 1254, 1386, 
            1584, 1390, 1250, 1160, 1122, 1092, 1079, 1068, 1065, 1066, 1070, 1081, 1104, 1136, 1182, 1286, 1428, 
            1643, 1427, 1278, 1182, 1137, 1102, 1083, 1078, 1072, 1073, 1073, 1091, 1116, 1148, 1208, 1319, 1480, 
        },

        /* Channel B */
        {
            1800, 1528, 1364, 1239, 1162, 1125, 1105, 1093, 1093, 1093, 1101, 1124, 1149, 1190, 1276, 1416, 1559, 
            1698, 1472, 1311, 1205, 1144, 1116, 1096, 1084, 1086, 1088, 1096, 1107, 1135, 1167, 1241, 1370, 1519, 
            1613, 1409, 1260, 1173, 1123, 1095, 1079, 1077, 1072, 1073, 1081, 1094, 1112, 1147, 1202, 1315, 1439, 
            1540, 1363, 1227, 1156, 1109, 1085, 1069, 1064, 1062, 1063, 1070, 1086, 1101, 1132, 1176, 1272, 1397, 
            1490, 1325, 1197, 1134, 1095, 1080, 1067, 1054, 1051, 1052, 1065, 1075, 1088, 1118, 1159, 1238, 1359, 
            1464, 1292, 1179, 1120, 1088, 1072, 1060, 1048, 1044, 1045, 1056, 1067, 1085, 1111, 1148, 1218, 1323, 
            1434, 1286, 1164, 1114, 1081, 1068, 1053, 1043, 1033, 1040, 1048, 1060, 1076, 1094, 1137, 1207, 1304, 
            1413, 1261, 1159, 1109, 1078, 1071, 1048, 1035, 1029, 1034, 1046, 1059, 1078, 1091, 1132, 1198, 1288, 
            1407, 1257, 1149, 1108, 1077, 1061, 1047, 1029, 1024, 1028, 1038, 1051, 1075, 1087, 1131, 1188, 1281, 
            1401, 1250, 1148, 1103, 1077, 1061, 1044, 1026, 1024, 1025, 1040, 1052, 1069, 1091, 1129, 1186, 1276, 
            1401, 1251, 1149, 1107, 1077, 1060, 1044, 1036, 1026, 1025, 1037, 1054, 1071, 1087, 1130, 1192, 1286, 
            1420, 1260, 1155, 1108, 1081, 1062, 1049, 1039, 1036, 1035, 1039, 1057, 1069, 1094, 1132, 1197, 1294, 
            1436, 1277, 1170, 1119, 1086, 1066, 1054, 1043, 1043, 1038, 1042, 1059, 1076, 1104, 1141, 1206, 1308, 
            1470, 1300, 1184, 1127, 1096, 1070, 1058, 1048, 1049, 1044, 1052, 1064, 1078, 1109, 1148, 1224, 1329, 
            1504, 1335, 1204, 1140, 1102, 1075, 1063, 1056, 1053, 1053, 1061, 1074, 1088, 1118, 1159, 1247, 1363, 
            1559, 1374, 1247, 1157, 1117, 1087, 1079, 1066, 1064, 1063, 1068, 1076, 1100, 1132, 1180, 1282, 1406, 
            1627, 1416, 1269, 1179, 1129, 1100, 1082, 1075, 1067, 1066, 1071, 1084, 1113, 1141, 1205, 1306, 1452, 
        },

    },

	{
        /* AWB RGain */
        304,
        /* AWB BGain */
        621,
        /* Channel R */
        {
            1876, 1604, 1416, 1299, 1222, 1178, 1148, 1129, 1120, 1114, 1124, 1133, 1160, 1201, 1283, 1412, 1590, 
            1770, 1539, 1372, 1263, 1194, 1156, 1128, 1111, 1106, 1099, 1105, 1114, 1138, 1172, 1243, 1368, 1520, 
            1686, 1482, 1320, 1225, 1170, 1137, 1107, 1098, 1088, 1085, 1089, 1098, 1118, 1149, 1203, 1315, 1463, 
            1614, 1429, 1286, 1208, 1153, 1119, 1099, 1084, 1074, 1072, 1078, 1083, 1100, 1133, 1176, 1273, 1410, 
            1558, 1388, 1258, 1182, 1137, 1113, 1090, 1075, 1062, 1060, 1065, 1074, 1088, 1112, 1159, 1241, 1363, 
            1528, 1356, 1239, 1171, 1126, 1100, 1085, 1065, 1050, 1050, 1057, 1066, 1079, 1101, 1142, 1220, 1335, 
            1503, 1352, 1221, 1161, 1117, 1097, 1073, 1057, 1041, 1040, 1048, 1061, 1071, 1097, 1133, 1203, 1315, 
            1479, 1321, 1215, 1156, 1117, 1102, 1071, 1049, 1034, 1032, 1042, 1055, 1069, 1090, 1128, 1192, 1302, 
            1472, 1319, 1213, 1155, 1116, 1091, 1068, 1044, 1026, 1026, 1038, 1050, 1068, 1085, 1127, 1187, 1292, 
            1471, 1315, 1207, 1152, 1110, 1089, 1066, 1047, 1027, 1024, 1036, 1051, 1066, 1085, 1123, 1187, 1291, 
            1477, 1321, 1212, 1153, 1113, 1089, 1069, 1049, 1033, 1028, 1040, 1053, 1067, 1086, 1126, 1187, 1293, 
            1491, 1326, 1216, 1157, 1117, 1091, 1072, 1052, 1041, 1038, 1041, 1055, 1066, 1088, 1129, 1195, 1303, 
            1496, 1345, 1226, 1166, 1123, 1095, 1079, 1059, 1047, 1045, 1051, 1061, 1074, 1097, 1140, 1209, 1321, 
            1539, 1372, 1245, 1177, 1127, 1104, 1083, 1065, 1059, 1046, 1060, 1066, 1080, 1105, 1151, 1229, 1349, 
            1581, 1403, 1273, 1190, 1148, 1109, 1091, 1078, 1068, 1064, 1070, 1077, 1089, 1121, 1164, 1253, 1385, 
            1641, 1451, 1304, 1212, 1162, 1128, 1110, 1087, 1078, 1078, 1082, 1087, 1106, 1139, 1189, 1290, 1435, 
            1713, 1489, 1338, 1239, 1181, 1139, 1115, 1108, 1090, 1085, 1086, 1098, 1121, 1155, 1208, 1324, 1487, 
        },

        /* Channel Gr */
        {
            1805, 1547, 1375, 1263, 1188, 1153, 1126, 1114, 1103, 1101, 1105, 1117, 1140, 1178, 1251, 1380, 1558, 
            1711, 1487, 1329, 1226, 1166, 1134, 1111, 1096, 1094, 1088, 1089, 1101, 1121, 1149, 1214, 1331, 1488, 
            1630, 1425, 1279, 1189, 1144, 1115, 1093, 1086, 1080, 1077, 1075, 1084, 1099, 1128, 1177, 1278, 1425, 
            1564, 1380, 1245, 1178, 1125, 1101, 1086, 1074, 1067, 1066, 1070, 1076, 1085, 1111, 1149, 1242, 1375, 
            1507, 1337, 1217, 1158, 1113, 1096, 1077, 1065, 1057, 1054, 1059, 1067, 1076, 1098, 1134, 1209, 1332, 
            1482, 1308, 1196, 1142, 1110, 1086, 1072, 1058, 1046, 1045, 1048, 1058, 1067, 1084, 1120, 1188, 1300, 
            1449, 1306, 1184, 1135, 1100, 1084, 1068, 1052, 1036, 1035, 1043, 1049, 1061, 1080, 1112, 1172, 1282, 
            1431, 1278, 1176, 1130, 1099, 1086, 1061, 1044, 1027, 1031, 1038, 1047, 1061, 1075, 1106, 1161, 1265, 
            1418, 1271, 1172, 1125, 1095, 1076, 1060, 1039, 1025, 1024, 1033, 1044, 1057, 1070, 1104, 1156, 1261, 
            1420, 1267, 1173, 1127, 1095, 1078, 1062, 1042, 1027, 1024, 1031, 1043, 1054, 1070, 1099, 1157, 1251, 
            1421, 1270, 1175, 1127, 1093, 1077, 1061, 1044, 1028, 1027, 1034, 1047, 1056, 1068, 1103, 1157, 1257, 
            1435, 1281, 1175, 1131, 1096, 1078, 1062, 1045, 1035, 1032, 1038, 1048, 1057, 1070, 1105, 1161, 1262, 
            1454, 1298, 1188, 1137, 1100, 1083, 1065, 1051, 1044, 1039, 1043, 1049, 1058, 1079, 1116, 1177, 1287, 
            1479, 1325, 1204, 1146, 1106, 1086, 1070, 1059, 1048, 1040, 1049, 1052, 1064, 1087, 1124, 1197, 1308, 
            1526, 1354, 1228, 1159, 1119, 1091, 1075, 1067, 1057, 1055, 1057, 1062, 1074, 1099, 1139, 1218, 1349, 
            1583, 1396, 1261, 1177, 1133, 1105, 1088, 1075, 1068, 1066, 1067, 1071, 1085, 1114, 1159, 1251, 1385, 
            1650, 1434, 1293, 1197, 1151, 1117, 1090, 1089, 1076, 1073, 1071, 1081, 1101, 1130, 1184, 1282, 1437, 
        },

        /* Channel Gb */
        {
            1811, 1553, 1383, 1271, 1197, 1159, 1136, 1117, 1107, 1109, 1114, 1126, 1148, 1188, 1263, 1395, 1569, 
            1703, 1485, 1329, 1226, 1168, 1135, 1112, 1097, 1095, 1087, 1095, 1103, 1122, 1151, 1219, 1337, 1500, 
            1624, 1423, 1281, 1192, 1143, 1114, 1096, 1085, 1077, 1076, 1079, 1084, 1100, 1128, 1180, 1284, 1429, 
            1554, 1378, 1243, 1177, 1127, 1099, 1087, 1076, 1070, 1067, 1072, 1077, 1084, 1111, 1149, 1245, 1375, 
            1509, 1340, 1216, 1157, 1114, 1097, 1078, 1069, 1058, 1055, 1059, 1069, 1074, 1097, 1138, 1215, 1338, 
            1473, 1309, 1195, 1141, 1107, 1085, 1073, 1056, 1046, 1045, 1050, 1057, 1068, 1086, 1123, 1192, 1302, 
            1443, 1298, 1182, 1132, 1100, 1082, 1066, 1050, 1040, 1037, 1043, 1050, 1064, 1080, 1113, 1173, 1282, 
            1423, 1273, 1176, 1128, 1095, 1085, 1063, 1044, 1028, 1026, 1037, 1049, 1063, 1075, 1105, 1166, 1272, 
            1412, 1268, 1170, 1123, 1092, 1078, 1063, 1040, 1024, 1024, 1033, 1044, 1059, 1071, 1104, 1157, 1258, 
            1412, 1265, 1172, 1123, 1091, 1079, 1058, 1041, 1027, 1026, 1032, 1041, 1056, 1071, 1101, 1157, 1255, 
            1417, 1267, 1171, 1125, 1091, 1075, 1059, 1044, 1031, 1027, 1034, 1047, 1055, 1070, 1103, 1158, 1264, 
            1431, 1276, 1172, 1131, 1095, 1076, 1058, 1046, 1035, 1031, 1038, 1048, 1057, 1070, 1105, 1164, 1270, 
            1446, 1295, 1184, 1133, 1100, 1082, 1065, 1053, 1042, 1041, 1041, 1052, 1061, 1079, 1116, 1176, 1291, 
            1477, 1317, 1202, 1142, 1105, 1085, 1072, 1057, 1049, 1043, 1051, 1056, 1065, 1089, 1124, 1198, 1314, 
            1516, 1351, 1223, 1157, 1118, 1092, 1075, 1066, 1056, 1056, 1059, 1065, 1073, 1099, 1137, 1221, 1345, 
            1575, 1393, 1259, 1172, 1132, 1102, 1088, 1072, 1065, 1065, 1066, 1072, 1088, 1114, 1159, 1255, 1390, 
            1643, 1432, 1288, 1194, 1145, 1115, 1092, 1086, 1072, 1075, 1071, 1082, 1102, 1124, 1182, 1288, 1445, 
        },

        /* Channel B */
        {
            1813, 1549, 1376, 1259, 1185, 1145, 1124, 1101, 1102, 1096, 1104, 1121, 1146, 1175, 1249, 1381, 1533, 
            1705, 1486, 1324, 1219, 1161, 1131, 1104, 1100, 1094, 1088, 1092, 1102, 1120, 1156, 1216, 1331, 1460, 
            1618, 1424, 1280, 1183, 1140, 1109, 1096, 1084, 1082, 1079, 1078, 1087, 1104, 1131, 1178, 1282, 1404, 
            1547, 1375, 1240, 1169, 1122, 1096, 1084, 1075, 1070, 1070, 1071, 1077, 1085, 1110, 1151, 1241, 1360, 
            1505, 1335, 1217, 1153, 1109, 1094, 1075, 1070, 1060, 1057, 1062, 1073, 1078, 1097, 1135, 1217, 1318, 
            1473, 1306, 1189, 1137, 1103, 1086, 1074, 1058, 1049, 1052, 1053, 1064, 1067, 1086, 1127, 1187, 1283, 
            1435, 1302, 1183, 1131, 1098, 1083, 1067, 1054, 1040, 1042, 1048, 1051, 1068, 1080, 1110, 1176, 1268, 
            1425, 1274, 1171, 1127, 1096, 1084, 1067, 1049, 1032, 1032, 1037, 1054, 1064, 1075, 1110, 1171, 1254, 
            1409, 1268, 1165, 1123, 1094, 1078, 1061, 1045, 1030, 1024, 1038, 1050, 1059, 1072, 1104, 1163, 1242, 
            1404, 1263, 1166, 1127, 1096, 1081, 1059, 1046, 1030, 1024, 1041, 1050, 1057, 1071, 1101, 1161, 1242, 
            1415, 1267, 1168, 1120, 1095, 1079, 1062, 1048, 1033, 1035, 1040, 1055, 1062, 1071, 1107, 1159, 1253, 
            1429, 1278, 1169, 1129, 1100, 1080, 1067, 1046, 1036, 1033, 1037, 1053, 1057, 1075, 1108, 1165, 1246, 
            1444, 1286, 1179, 1127, 1104, 1085, 1068, 1057, 1047, 1040, 1045, 1053, 1063, 1083, 1116, 1173, 1271, 
            1478, 1312, 1199, 1141, 1113, 1088, 1072, 1062, 1055, 1040, 1057, 1062, 1068, 1092, 1122, 1198, 1296, 
            1510, 1353, 1222, 1158, 1123, 1092, 1079, 1068, 1060, 1059, 1061, 1067, 1075, 1102, 1140, 1223, 1335, 
            1559, 1383, 1260, 1173, 1134, 1101, 1090, 1076, 1068, 1067, 1070, 1073, 1092, 1116, 1156, 1253, 1380, 
            1623, 1424, 1293, 1192, 1148, 1119, 1098, 1090, 1074, 1076, 1069, 1082, 1101, 1129, 1181, 1283, 1424, 
        },
    },
};

/***BAYER NR**/
static ISP_CMOS_BAYERNR_S g_stIspBayerNr =
{
    /*Calibration Lut Num*/
	7,
	/*************Calibration LUT Table*************/
	{
	    {100.000000f, 0.047971f},
        {200.000000f, 0.082093f},
        {400.000000f, 0.144531f},
        {800.000000f, 0.264869f},
        {1600.000000f, 0.504513f},
        {3200.000000f, 0.525013f},
        {6400.000000f, 0.521649f},
	},
	/*********************************************/
	{ 140, 110, 110, 140},           //CoarseStr
	{ 20, 25, 30, 35, 40, 50, 60, 70, 75, 30, 35, 35, 35, 40, 40, 50},    //lutFineStr
	{
	    {1,1,1,1,2,2,2,3,3,3,3,3,3,3,3,3},   //ChromaStrR
        {0,0,0,0,1,1,1,2,2,2,2,2,2,0,0,0},   //ChromaStrGr
	    {0,0,0,0,1,1,1,2,2,2,2,2,2,0,0,0},   //ChromaStrGb
	    {1,1,1,1,2,2,2,3,3,3,3,3,3,3,3,3}    //ChromaStrB
	},
	{ 600, 600, 600, 550, 500, 450, 400, 350, 300, 600, 600, 600, 600, 600, 600, 600},	   //lutCoringWeight
	{ 600, 600, 600, 600, 650, 650, 650, 650, 700, 700, 700, 700, 700, 700, 700, 700, \
           800, 800, 800, 850, 850, 850, 900, 900, 900, 950, 950, 950, 1000, 1000, 1000, 1000, 1000}
};

HI_U32 cmos_get_isp_default(ISP_CMOS_DEFAULT_S *pstDef)
{
    if (HI_NULL == pstDef)
    {
        printf("null pointer when get isp default value!\n");
        return -1;
    }

    memset(pstDef, 0, sizeof(ISP_CMOS_DEFAULT_S));
	memcpy(&pstDef->stLsc.stLscUniParaTable, &g_stCmosLscUniTable, sizeof(ISP_LSC_CABLI_UNI_TABLE_S));
	memcpy(&pstDef->stLsc.stLscParaTable[0], &g_stCmosLscTable[0], sizeof(ISP_LSC_CABLI_TABLE_S)*HI_ISP_LSC_LIGHT_NUM);
    memcpy(&pstDef->stCa,        &g_stIspCA,sizeof(ISP_CMOS_CA_S));
    switch (genSensorMode)
    {
        default:
        case WDR_MODE_NONE:
		    memcpy(&pstDef->stDemosaic, &g_stIspDemosaic, sizeof(ISP_CMOS_DEMOSAIC_S));
            memcpy(&pstDef->stYuvSharpen, &g_stIspYuvSharpen, sizeof(ISP_CMOS_YUV_SHARPEN_S));
            memcpy(&pstDef->stDrc, &g_stIspDRC, sizeof(ISP_CMOS_DRC_S));
			memcpy(&pstDef->stGamma, &g_stIspGamma, sizeof(ISP_CMOS_GAMMA_S));
			memcpy(&pstDef->stBayerNr, &g_stIspBayerNr, sizeof(ISP_CMOS_BAYERNR_S));
		    memcpy(&pstDef->stGe, &g_stIspGe, sizeof(ISP_CMOS_GE_S));
		    memcpy(&pstDef->stFcr, &g_stIspFcr, sizeof(ISP_CMOS_FCR_S));
			memcpy(&pstDef->stDpc, &g_stCmosDpc, sizeof(ISP_CMOS_DPC_S));
        break;
    }
    pstDef->stSensorMaxResolution.u32MaxWidth  = 1920;
    pstDef->stSensorMaxResolution.u32MaxHeight = 1080;
    return 0;
}

HI_U32 cmos_get_isp_black_level(ISP_CMOS_BLACK_LEVEL_S *pstBlackLevel)
{
    HI_S32  i;
    
    if (HI_NULL == pstBlackLevel)
    {
        printf("null pointer when get isp black level value!\n");
        return -1;
    }
    
    /* Don't need to update black level when iso change */
    pstBlackLevel->bUpdate = HI_FALSE;
    
	for (i=0; i<4; i++)
	{
		pstBlackLevel->au16BlackLevel[i] = 0x40;
	}
    
    return 0;
}

HI_VOID cmos_set_pixel_detect(HI_BOOL bEnable)
{
    HI_U32 u32FullLines_5Fps = 6804, u32MaxIntTime_5Fps = 6802;
    
    if (SENSOR_1080P_30FPS_MODE == gu8SensorImageMode)
    {
        u32FullLines_5Fps = (VMAX_1080P30_LINEAR * 30) / 5;
    }
    else
    {
        return;
    }
    
    //u32FullLines_5Fps = (u32FullLines_5Fps > FULL_LINES_MAX) ? FULL_LINES_MAX : u32FullLines_5Fps;
    u32MaxIntTime_5Fps = u32FullLines_5Fps - 2;
    
    if (bEnable) /* setup for ISP pixel calibration mode */
    {
        sensor_write_register(0x23, (u32FullLines_5Fps & 0xFF00) >> 8);  /* 5fps */
        sensor_write_register(0x22, u32FullLines_5Fps & 0xFF);           /* 5fps */
        sensor_write_register(0x02, (u32MaxIntTime_5Fps & 0xFF00) >> 8);      /* max exposure lines */
        sensor_write_register(0x01, u32MaxIntTime_5Fps & 0xFF);               /* max exposure lines */
        sensor_write_register(0x00, 0x00);                                    /* min AG */
    }
    else /* setup for ISP 'normal mode' */
    {
        sensor_write_register(VMAX_ADDR_H, (gu32FullLinesStd & 0xFF00) >> 8);
        sensor_write_register(VMAX_ADDR_L, gu32FullLinesStd & 0xFF);
        bInit = HI_FALSE;
    }
    
    return;
}

HI_VOID cmos_set_wdr_mode(HI_U8 u8Mode)
{
    bInit = HI_FALSE;
    
    switch(u8Mode)
    {
        case WDR_MODE_NONE:
            gu32FullLinesStd = VMAX_1080P30_LINEAR;
            genSensorMode = WDR_MODE_NONE;
            printf("linear mode\n");
        break;
        
        default:
            printf("NOT support this mode!\n");
            return;
        break;
    }
    gu32FullLines = gu32FullLinesStd;
    gu32PreFullLines = gu32FullLines;
    
    return;
}

HI_U32 cmos_get_sns_regs_info(ISP_SNS_REGS_INFO_S *pstSnsRegsInfo)
{
    HI_S32 i;

    if (HI_FALSE == bInit)
    {
        g_stSnsRegsInfo.enSnsType = ISP_SNS_I2C_TYPE;
        g_stSnsRegsInfo.u8Cfg2ValidDelayMax = 2; // 3;
        g_stSnsRegsInfo.u32RegNum = 5;
		
        for (i=0; i<g_stSnsRegsInfo.u32RegNum; i++)
        {
            g_stSnsRegsInfo.astI2cData[i].bUpdate = HI_TRUE;
            g_stSnsRegsInfo.astI2cData[i].u8DevAddr = sensor_i2c_addr;
            g_stSnsRegsInfo.astI2cData[i].u32AddrByteNum = sensor_addr_byte;
            g_stSnsRegsInfo.astI2cData[i].u32DataByteNum = sensor_data_byte;
        }
        g_stSnsRegsInfo.astI2cData[0].u8DelayFrmNum = 0;
        g_stSnsRegsInfo.astI2cData[0].u32RegAddr = EXPOSURE_ADDR_L;
        g_stSnsRegsInfo.astI2cData[1].u8DelayFrmNum = 0;
        g_stSnsRegsInfo.astI2cData[1].u32RegAddr = EXPOSURE_ADDR_H;
        
        /* AG */
        g_stSnsRegsInfo.astI2cData[2].u8DelayFrmNum = 0;
        g_stSnsRegsInfo.astI2cData[2].u32RegAddr = AGC_ADDR;
        
        /* VMAX */
        g_stSnsRegsInfo.astI2cData[3].u32RegAddr = VMAX_ADDR_L;
        g_stSnsRegsInfo.astI2cData[3].u8DelayFrmNum = 0;
        g_stSnsRegsInfo.astI2cData[4].u32RegAddr = VMAX_ADDR_H; 
        g_stSnsRegsInfo.astI2cData[4].u8DelayFrmNum = 0;
        
        bInit = HI_TRUE;
    }
    else
    {
        for (i=0; i<g_stSnsRegsInfo.u32RegNum; i++)
        {
            if (g_stSnsRegsInfo.astI2cData[i].u32Data == g_stPreSnsRegsInfo.astI2cData[i].u32Data)
            {
                g_stSnsRegsInfo.astI2cData[i].bUpdate = HI_FALSE;
            }
            else
            {
                g_stSnsRegsInfo.astI2cData[i].bUpdate = HI_TRUE;
            }
        }
	}
    
	if(gu32PreFullLines < gu32FullLines)
    {
        g_stSnsRegsInfo.astI2cData[3].u8DelayFrmNum = 0;
        g_stSnsRegsInfo.astI2cData[4].u8DelayFrmNum = 0;
    }
    else
    {
        g_stSnsRegsInfo.astI2cData[3].u8DelayFrmNum = 1;
        g_stSnsRegsInfo.astI2cData[4].u8DelayFrmNum = 1;
    }
    
    if (HI_NULL == pstSnsRegsInfo)
    {
        printf("null pointer when get sns reg info!\n");
        return -1;
    }
    
    memcpy(pstSnsRegsInfo, &g_stSnsRegsInfo, sizeof(ISP_SNS_REGS_INFO_S)); 
    memcpy(&g_stPreSnsRegsInfo, &g_stSnsRegsInfo, sizeof(ISP_SNS_REGS_INFO_S)); 
    gu32PreFullLines = gu32FullLines;
    
    return 0;
}

static HI_S32 cmos_set_image_mode(ISP_CMOS_SENSOR_IMAGE_MODE_S *pstSensorImageMode)
{
    HI_U8 u8SensorImageMode = gu8SensorImageMode;
    
    bInit = HI_FALSE;    
    
    if (HI_NULL == pstSensorImageMode )
    {
        printf("null pointer when set image mode\n");
        return -1;
    }
    
    if ((pstSensorImageMode->u16Width <= 1920) && (pstSensorImageMode->u16Height <= 1080))
    {
        if (pstSensorImageMode->f32Fps <= 30)
        {
            u8SensorImageMode = SENSOR_1080P_30FPS_MODE;
        }
        else
        {
            printf("Not support! Width:%d, Height:%d, Fps:%f, WDRMode:%d\n", 
                pstSensorImageMode->u16Width, 
                pstSensorImageMode->u16Height,
                pstSensorImageMode->f32Fps,
                genSensorMode);
            
            return -1;
        }
    }
    else
    {
        printf("Not support! Width:%d, Height:%d, Fps:%f, WDRMode:%d\n", 
            pstSensorImageMode->u16Width, 
            pstSensorImageMode->u16Height,
            pstSensorImageMode->f32Fps,
            genSensorMode);
        
        return -1;
    }
    
    /* Sensor first init */
    if (HI_FALSE == bSensorInit)
    {
        gu8SensorImageMode = u8SensorImageMode;
        
        return 0;
    }
    
    /* Switch SensorImageMode */
    if (u8SensorImageMode == gu8SensorImageMode)
    {
        /* Don't need to switch SensorImageMode */
        return -1;
    }
    
    gu8SensorImageMode = u8SensorImageMode;
    
    return 0;
}

HI_VOID sensor_global_init(HI_VOID)
{
    gu8SensorImageMode = SENSOR_1080P_30FPS_MODE;
    genSensorMode = WDR_MODE_NONE;
    gu32FullLinesStd = VMAX_1080P30_LINEAR;
    gu32FullLines = VMAX_1080P30_LINEAR;
    gu32PreFullLines = VMAX_1080P30_LINEAR;
    bInit = HI_FALSE;
    bSensorInit = HI_FALSE; 
    memset(&g_stSnsRegsInfo, 0, sizeof(ISP_SNS_REGS_INFO_S));
    memset(&g_stPreSnsRegsInfo, 0, sizeof(ISP_SNS_REGS_INFO_S));
    return;
}

HI_S32 cmos_init_sensor_exp_function(ISP_SENSOR_EXP_FUNC_S *pstSensorExpFunc)
{
    memset(pstSensorExpFunc, 0, sizeof(ISP_SENSOR_EXP_FUNC_S));
    
    pstSensorExpFunc->pfn_cmos_sensor_init = sensor_init;
    pstSensorExpFunc->pfn_cmos_sensor_exit = sensor_exit;
    pstSensorExpFunc->pfn_cmos_sensor_global_init = sensor_global_init;
    pstSensorExpFunc->pfn_cmos_set_image_mode = cmos_set_image_mode;
    pstSensorExpFunc->pfn_cmos_set_wdr_mode = cmos_set_wdr_mode;
    
    pstSensorExpFunc->pfn_cmos_get_isp_default = cmos_get_isp_default;
    pstSensorExpFunc->pfn_cmos_get_isp_black_level = cmos_get_isp_black_level;
    pstSensorExpFunc->pfn_cmos_set_pixel_detect = cmos_set_pixel_detect;
    pstSensorExpFunc->pfn_cmos_get_sns_reg_info = cmos_get_sns_regs_info;
    
    return 0;
}

/****************************************************************************
 * callback structure                                                       *
 ****************************************************************************/
int sensor_register_callback(void)
{
    ISP_DEV IspDev = 0;
    HI_S32 s32Ret;
    ALG_LIB_S stLib;
    ISP_SENSOR_REGISTER_S stIspRegister;
    AE_SENSOR_REGISTER_S  stAeRegister;
    AWB_SENSOR_REGISTER_S stAwbRegister;
    
    cmos_init_sensor_exp_function(&stIspRegister.stSnsExp);
    s32Ret = HI_MPI_ISP_SensorRegCallBack(IspDev, JXF22_ID, &stIspRegister);
    if (s32Ret)
    {
        printf("sensor register callback function failed!\n");
        return s32Ret;
    }
    
    stLib.s32Id = 0;
    strncpy(stLib.acLibName, HI_AE_LIB_NAME, sizeof(HI_AE_LIB_NAME));
    cmos_init_ae_exp_function(&stAeRegister.stSnsExp);
    s32Ret = HI_MPI_AE_SensorRegCallBack(IspDev, &stLib, JXF22_ID, &stAeRegister);
    if (s32Ret)
    {
        printf("sensor register callback function to ae lib failed!\n");
        return s32Ret;
    }
    
    stLib.s32Id = 0;
    strncpy(stLib.acLibName, HI_AWB_LIB_NAME, sizeof(HI_AWB_LIB_NAME));
    cmos_init_awb_exp_function(&stAwbRegister.stSnsExp);
    s32Ret = HI_MPI_AWB_SensorRegCallBack(IspDev, &stLib, JXF22_ID, &stAwbRegister);
    if (s32Ret)
    {
        printf("sensor register callback function to awb lib failed!\n");
        return s32Ret;
    }
    
    return 0;
}

int sensor_unregister_callback(void)
{
    ISP_DEV IspDev = 0;
    HI_S32 s32Ret;
    ALG_LIB_S stLib;
    
    s32Ret = HI_MPI_ISP_SensorUnRegCallBack(IspDev, JXF22_ID);
    if (s32Ret)
    {
        printf("sensor unregister callback function failed!\n");
        return s32Ret;
    }
    
    stLib.s32Id = 0;
    strncpy(stLib.acLibName, HI_AE_LIB_NAME, sizeof(HI_AE_LIB_NAME));
    s32Ret = HI_MPI_AE_SensorUnRegCallBack(IspDev, &stLib, JXF22_ID);
    if (s32Ret)
    {
        printf("sensor unregister callback function to ae lib failed!\n");
        return s32Ret;
    }
    
    stLib.s32Id = 0;
    strncpy(stLib.acLibName, HI_AWB_LIB_NAME, sizeof(HI_AWB_LIB_NAME));
    s32Ret = HI_MPI_AWB_SensorUnRegCallBack(IspDev, &stLib, JXF22_ID);
    if (s32Ret)
    {
        printf("sensor unregister callback function to awb lib failed!\n");
        return s32Ret;
    }
    
    return 0;
}

int sensor_set_init(ISP_INIT_ATTR_S *pstInitAttr)
{
    ISP_DEV IspDev = 0;

    g_au16InitWBGain[IspDev][0] = pstInitAttr->u16WBRgain;
    g_au16InitWBGain[IspDev][1] = pstInitAttr->u16WBGgain;
    g_au16InitWBGain[IspDev][2] = pstInitAttr->u16WBBgain;
    g_au16SampleRgain[IspDev] = pstInitAttr->u16SampleRgain;
    g_au16SampleBgain[IspDev] = pstInitAttr->u16SampleBgain;
    
    return 0;
}

#ifdef __cplusplus
#if __cplusplus
}
#endif
#endif /* End of #ifdef __cplusplus */

#endif 
